version: "3"

services:
  wordpress_phpunit:
    build:
      context: tools
      dockerfile: phpunit.dockerfile
      args:
        VERSION_PHP: 7.2
        VERSION_PHP_UNIT: 8
    working_dir: /app/yesticket
    environment:
      XDEBUG_MODE: "coverage"
    networks:
      - testing
    volumes:
      - "./:/app"
      - "testsuite:/tmp"
  mysql_phpunit:
    image: "mariadb:10.2"
    environment:
      MYSQL_ALLOW_EMPTY_PASSWORD: "yes"
      MYSQL_DATABASE: "wordpress_test"
      MYSQL_ROOT_PASSWORD: "test"
    networks:
      - testing

volumes:
  testsuite: {}

networks:
  testing:
    name: yesticket_testing