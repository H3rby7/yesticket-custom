name: Test on Push
run-name: testing '${{ github.ref }}'
on: [push]
jobs:
  Zip:
    runs-on: ubuntu-latest
    services:
      # Label used to access the service container
      # mariadb:
      #   # Docker Hub image
      #   image: mariadb
      #   env:
      #     MYSQL_ALLOW_EMPTY_PASSWORD: "yes"
      #     MYSQL_DATABASE: "wordpress_test"
      #     MYSQL_ROOT_PASSWORD: "test"
      #   # Set health checks to wait until mariadb has started
      #   options: >-
      #     --health-cmd healthcheck.sh --no-defaults || exit 1
      #     --health-interval 10s
      #     --health-timeout 5s
      #     --health-retries 5
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
      - name: Composer update
        run: |
          composer update -n
      - name: Prepare WP Test-lib files
        env:
          VERSION_WP: 6.1.1
          WP_TESTS_DIR: ${{ github.repository }}/tmp/wordpress-tests-lib
        run: |
          mkdir -p $WP_TESTS_DIR
          svn co --quiet https://develop.svn.wordpress.org/tags/$VERSION_WP/tests/phpunit/includes/ $WP_TESTS_DIR/includes
          svn co --quiet https://develop.svn.wordpress.org/tags/$VERSION_WP/tests/phpunit/data/ $WP_TESTS_DIR/data
      - run: echo "üçè This job's status is ${{ job.status }}."